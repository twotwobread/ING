# [Gold II] 트리의 지름 - 1167 

[문제 링크](https://www.acmicpc.net/problem/1167) 

### 성능 요약

메모리: 96264 KB, 시간: 996 ms

### 분류

깊이 우선 탐색, 그래프 이론, 그래프 탐색, 트리

### 문제 설명

<p>트리의 지름이란, 트리에서 임의의 두 점 사이의 거리 중 가장 긴 것을 말한다. 트리의 지름을 구하는 프로그램을 작성하시오.</p>

### 입력 

 <p>트리가 입력으로 주어진다. 먼저 첫 번째 줄에서는 트리의 정점의 개수 V가 주어지고 (2 ≤ V ≤ 100,000)둘째 줄부터 V개의 줄에 걸쳐 간선의 정보가 다음과 같이 주어진다. 정점 번호는 1부터 V까지 매겨져 있다.</p>

<p>먼저 정점 번호가 주어지고, 이어서 연결된 간선의 정보를 의미하는 정수가 두 개씩 주어지는데, 하나는 정점번호, 다른 하나는 그 정점까지의 거리이다. 예를 들어 네 번째 줄의 경우 정점 3은 정점 1과 거리가 2인 간선으로 연결되어 있고, 정점 4와는 거리가 3인 간선으로 연결되어 있는 것을 보여준다. 각 줄의 마지막에는 -1이 입력으로 주어진다. 주어지는 거리는 모두 10,000 이하의 자연수이다.</p>

### 출력 

 <p>첫째 줄에 트리의 지름을 출력한다.</p>

## 핵심 아이디어
- 이 문제의 핵심 아이디어는 트리의 지름을 구하기 위해선 임의의 노드 A에서 가장 먼 노드 B를 구하고 그 노드에서 가장 먼 노드 C까지의 길이를 구했을 때 이게 트리의 지름이 된다는 사실이다.
- 그 이유는 우리가 선형시간 안에 dfs를 통해 트리의 지름을 찾기 위해선 n만큼 돌려선 안된다. 지름을 구하기 위해선 아래와 같은 경우의 수가 발생한다.
 - 임의의 노드를 잡았을 때, 이 노드가 트리의 지름을 구하기 위해서 출발하는 노드인 경우.
 - 임의의 노드를 잡았을 때, 이 노드가 트리의 지름을 구하기 위한 도착하는 노드인 경우.
 - 위 두 경우 모두 아닌 경우.
- 트리의 지름을 구하기 위한 노드에 해당하는 위 두 경우는 그냥 dfs 한번으로 트리의 지름을 찾아낼 수 있다. 하지만 마지막의 경우엔 때문에 한번의 dfs로 트리의 지름을 구할 수 없는 것이다.
- 이 마지막 경우에서 두 가지 경우가 가능하다.
 - __노드 A와 노드 B를 연결하는 경로가 트리의 지름을 나타내는 시작 노드 U와 도착 노드 V의 경로와 한 점 이상 공유하는 경우.__
  ![image](https://user-images.githubusercontent.com/78334910/236126104-5d22f0fb-1d34-4d02-9296-39fa53356488.png)
  - U, V와 A, B가 공유하는 임의의 점을 T라고 가정했을 때, d(T, B) = max(d(T, U), d(T, V))이라는 것을 알 수 있다.
  - 우리가 구현하는 알고리즘이 임의의 노드에서 가장 먼 노드를 찾기 때문에 A에서 가장 먼 노드는 B일 것이고 트리의 지름은 U에서 V이다.
  - 그렇다면 d(T, B)는 d(T, U) or d(T, V)이다. 왜냐면 A에서 젤 먼 노드가 B이고 U, V는 트리의 지름이다. 그럼 T에서 더 먼 정점이 B가 된다.
  - A에서 T를 거쳐서 B로 가야하는데 T에서 가장 거리가 먼 점으로 가야하는 것이다. 그니까 d(A, B) 경로 상 T에서 가장 먼점이 B이고 d(U, V) 경로 상 T에서 가장 먼점은 U or V 그래서 B = U or V가 된다.
 - 노드 A와 노드 B를 연결하는 경로가 노드 U, 노드 V를 연결하는 경로와 완전히 독립인 경우
  ![image](https://user-images.githubusercontent.com/78334910/236127570-8977d03d-1bad-418b-a9fa-ceea7b8844b5.png)
  - 그림과 같은 상황에서 U에서 제일 먼 점이 V가 아닌 Y가 된다 그래서 모순된다.
  - d(X, Y) 입장에서 d(a,Y) > d(a, b, V)이어야 한다 X로부터 가장 먼 점이 Y이기 때문.
  - d(U, V) 입장에서 d(b,V) > d(b, a, Y)이어야 한다. U와 V가 트리의 지름이기 때문.
  => 결국 모순이다. 이런 상황은 발생할 수 없다.
- 그렇기에 임의의 노드 A로부터 가장 먼 B를 구하고 그 B로 부터 가장 먼 노드 C를 구한다면 트리의 지름은 B와 C를 연결하는 경로가 된다.
- [참조 링크](https://velog.io/@zioo/%ED%8A%B8%EB%A6%AC%EC%9D%98-%EC%A7%80%EB%A6%84-%EA%B5%AC%ED%95%98%EA%B8%B0)를 참조하자.
